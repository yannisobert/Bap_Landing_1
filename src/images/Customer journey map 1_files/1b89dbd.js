(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{1010:function(t,e,n){"use strict";n(1037);var r=n(147),o=n(24),c=n(5);e.a=o.a.extend({name:"v-progress-circular",directives:{intersect:r.a},props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:()=>({radius:20,isVisible:!0}),computed:{calculatedSize(){return Number(this.size)+(this.button?8:0)},circumference(){return 2*Math.PI*this.radius},classes(){return{"v-progress-circular--visible":this.isVisible,"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles(){return{height:Object(c.g)(this.calculatedSize),width:Object(c.g)(this.calculatedSize)}},svgStyles(){return{transform:"rotate(".concat(Number(this.rotate),"deg)")}},viewBoxSize(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle(t,e){return this.$createElement("circle",{class:"v-progress-circular__".concat(t),attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":e}})},genSvg(){const t=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(this.viewBoxSize," ").concat(this.viewBoxSize," ").concat(2*this.viewBoxSize," ").concat(2*this.viewBoxSize)}},t)},genInfo(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},this.$slots.default)},onObserve(t,e,n){this.isVisible=n}},render(t){return t("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}})},1037:function(t,e,n){},1942:function(t,e,n){"use strict";(function(t){n(10);var r=n(3),o=n(11),c=n(15),l=n.n(c),d=n(1338),h=n(2444),v=n(2435),_=n(2436),f=n(3429),m=n(1740);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={name:"WorkspaceBillingPage",components:{FaqList:d.a,PricingPlans:h.a,PricingPack:v.a,PricingPlansHelp:_.a,CurrentSubscription:f.a},transition:"page-static",data:()=>({isShowing:!1,pricingFaqQuestions:Object.freeze(m.c),isPricingBundlePromoVisible:l.a.layout.isPricingBundlePromoVisible}),async fetch(e){let{store:n,params:r,error:o}=e;try{await n.dispatch("subscriptions/fetchSubscriptions",{workspaceId:r.workspaceId})}catch(e){o({statusCode:t.get(e,"response.status"),message:t.get(e,"response.data.message")})}},computed:w(w(w(w({},Object(o.c)("subscriptions",["currentSubscription","isAutorenew"])),Object(o.c)("workspaces",["isSuperAdmin","isBillingManager","currentWorkspace"])),Object(o.e)("auth",["user"])),{},{currentPlanType(){return t.get(this.currentSubscription,["plan","type"])},isFreePlan(){return"free"===this.currentPlanType},showPricing(){const{upgrading:e}=t.get(this.$route,"query",{});return this.isFreePlan||e||!this.isSubscribed},isSubscribed(){return t.get(this.currentSubscription,["stripeCustomer","isSubscribed"])}}),watch:{showPricing(t,e){t!==e&&window.scrollTo(0,0)}},created(){this.isSuperAdmin||this.isBillingManager?this.isShowing=!0:this.$nuxt.error({statusCode:403,message:"You do not have permission to access this page"})},methods:w(w({},Object(o.b)("subscriptions",["fetchSubscriptions"])),{},{switchToPro(t){this.$router.push("/workspace/".concat(this.$route.params.workspaceId,"/billing/billing-information?plan=").concat(t)),this.$tracker.trackClickSwitchToPro(t)}})}}).call(this,n(12))},1943:function(t,e,n){"use strict";(function(t){n(10);var r=n(3),o=n(8),c=n(15),l=n(11),d=n(2142),h=n(2143),v=n(1771),_=n(3416),f=n(1031);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={name:"CurrentSubscription",components:{PlanName:d.a,PaymentSource:h.default,StripePrice:v.a,BillingBanner:_.a,WorkspaceSubheader:f.a},props:{currentSubscription:{type:Object,default:()=>({})}},data:()=>({contactEmail:c.mail.contactEmail}),computed:y(y(y(y({},Object(l.e)("ui",["isFetching"])),Object(l.c)("subscriptions",["isAutorenew"])),Object(l.c)("workspaces",["currentWorkspace"])),{},{planName(){return t.get(this.currentSubscription,"plan.name")},planInterval(){return t.get(this.currentSubscription,"plan.interval")},planType(){return t.get(this.currentSubscription,"plan.type")},planAmount(){return t.get(this.currentSubscription,"plan.amount",0)},subscriptionNextPaymentDate(){return this.$date(new Date(this.currentSubscription.nextPaymentDate),"MMM dd, yyyy")},quantity(){return t.get(this.currentSubscription,"quantity",1)},coupon(){return t.get(this.currentSubscription,"stripeCustomer.coupon")},isSubscriptionIncomplete(){return"incomplete"===t.get(this.currentSubscription,"stripeCustomer.status")},lastPaymentErrorMessage(){return t.get(this.currentSubscription,"stripeCustomer.lastPaymentError.message")},totalAmount(){let t=this.planAmount*this.quantity/100;return this.coupon&&this.coupon.amount_off&&(t-=this.coupon.amount_off/100),this.coupon&&this.coupon.percent_off&&(t-=t*this.coupon.percent_off/100),t<0?0:Math.round(100*t)/100},mailUrl(){const t=encodeURIComponent("Thinking about canceling. Change my mind."),body=encodeURIComponent("Hi team UXPressia, \n\nI would love to stay with you guys, but there's something I don't really like about UXPressia. And that is...");return"mailto:".concat(this.contactEmail,"?subject=").concat(t,"&body=").concat(body)},canSwitchToAnnual(){const e=t.get(this.currentSubscription,"stripeCustomer.sources"),n=e&&e.length,r=100===t.get(this.coupon,"percent_off");return"year"!==this.planInterval&&!this.currentSubscription.isCanceled&&n&&!r},isEnterprise(){return"enterprise"===this.planType},annualDiscount(){const e=t.get(o.planTypes,"".concat(this.planType,".amount"),{});return Math.ceil((12*e.month-e.year)/100*this.quantity)}}),methods:y(y({},Object(l.b)("subscriptions",["unsubscribe","renew","payInvoices"])),{},{openCouponDialog(){this.$openDialog({component:()=>n.e(14).then(n.bind(null,2149)),title:"redeem coupon",subscription:this.currentSubscription})},editSubscription(){this.$openDialog({component:()=>n.e(132).then(n.bind(null,3447)),title:"Edit subscription",planType:this.planType,planInterval:this.planInterval,quantity:this.quantity,dialogProps:{width:680}})},async toggleAutoRenew(t){const e=!0===t?"renew":"unsubscribe";await this[e]({subscription:this.currentSubscription,autorenew:!0})},openUnsubscribeDialog(){this.$openDialog({component:()=>n.e(35).then(n.bind(null,2453)),title:"Cancel subscription?"}),this.$tracker.trackWorkspaceSubscriptionCancelAttempt({plan:t.get(this.currentSubscription,"plan.stripePlanId")})},goToPricing(){this.$router.push("/workspace/".concat(this.$route.params.workspaceId,"/billing?upgrading=true"))},async retryPayment(){try{await this.payInvoices({subscriptionId:this.currentSubscription.id}),this.$tracker.trackRetryPayment({succeeded:!0}),this.setSuccess({text:"Payment has succeeded"})}catch(e){this.setError({error:e});const n=t.get(e,"response.data.message")||t.get(e,"message");this.$tracker.trackRetryPayment({succeeded:!1,message:n})}},openSwitchDialog(){this.$openDialog({title:"Switch to annual subscription?",component:()=>n.e(177).then(n.bind(null,3418)),quantity:this.quantity,planType:this.planType})}})}}).call(this,n(12))},2335:function(t,e,n){},2336:function(t,e,n){},2337:function(t,e,n){},3186:function(t,e,n){"use strict";n(2335)},3187:function(t,e,n){"use strict";n(2336)},3188:function(t,e,n){"use strict";n(2337)},3416:function(t,e,n){"use strict";var r={props:{title:{type:String,default:""},description:{type:String,default:""},features:{type:Array,default:()=>[]},label:Boolean,header:Boolean}},o=(n(3186),n(9)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"billing-banner"},[n("div",{class:{"billing-banner__header":t.header}},[t.label?n("div",{staticClass:"billing-banner__label"},[t._v("\n      Best value\n    ")]):t._e(),t._v(" "),t.title?n("div",{staticClass:"billing-banner__title"},[t._v("\n      "+t._s(t.title)+"\n    ")]):t._e(),t._v(" "),t.description?n("div",{staticClass:"billing-banner__description"},[t._v("\n      "+t._s(t.description)+"\n    ")]):t._e()]),t._v(" "),t.features.length?n("div",{staticClass:"billing-banner__features"},t._l(t.features,(function(e,r){return n("div",{key:r,staticClass:"billing-banner__feature"},[n("icon",{staticClass:"billing-banner__feature-icon",attrs:{name:"tick",width:"12",height:"12"}}),t._v(" "),n("div",[n("div",{staticClass:"billing-banner__feature-title"},[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),n("div",{staticClass:"billing-banner__feature-text"},[t._v("\n          "+t._s(e.description)+"\n        ")])])],1)})),0):t._e(),t._v(" "),n("div",{staticClass:"billing-banner__actions"},[t._t("actions")],2)])}),[],!1,null,"46364e77",null);e.a=component.exports},3429:function(t,e,n){"use strict";var r=n(1943).a,o=(n(3187),n(9)),c=n(20),l=n.n(c),d=n(1010),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("u-fragment",[n("section",{staticClass:"ws-billing__section"},[n("div",{staticClass:"d-flex justify-space-between"},[n("div",{staticClass:"current-subscription"},[n("workspace-subheader",{attrs:{title:"Current Subscription"}}),t._v(" "),n("div",{staticClass:"ws-billing-row"},[n("u-label",[t._v("Plan")]),t._v(" "),n("div",[n("plan-name",{attrs:{editable:!t.isEnterprise,canceled:t.currentSubscription.isCanceled,type:t.planType,interval:t.planInterval,quantity:t.quantity},on:{edit:t.editSubscription}})],1)],1),t._v(" "),n("div",{staticClass:"ws-billing-row"},[n("u-label",[t._v("Payment method")]),t._v(" "),n("div",[n("payment-source",{attrs:{"hide-form":!0,"bank-transfer":t.isEnterprise}})],1)],1),t._v(" "),n("div",{staticClass:"ws-billing-row ws-billing-row--flex"},[n("div",[t.currentSubscription.isCanceled?n("u-label",[t._v("\n              Active till\n            ")]):n("u-label",[t._v("\n              Next payment\n            ")]),t._v(" "),n("div",[t._v("\n              "+t._s(t.subscriptionNextPaymentDate)+"\n            ")])],1),t._v(" "),n("div",[n("u-label",[t._v(t._s(t.planInterval)+"ly payment")]),t._v(" "),t.currentSubscription.customPrice?n("div",[t._v("\n              $"+t._s(t.currentSubscription.customPrice*t.quantity)+"\n            ")]):n("div",[n("stripe-price",{attrs:{"plan-type":t.planType,"plan-interval":t.planInterval,quantity:t.quantity,fetch:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.discountAmount,r=e.recurringPaymentAmount;return[t._v("\n                  $"+t._s(r-n>0?Number((r-n).toFixed(2)):0)+" per "+t._s(t.planInterval)+"\n                ")]}}])})],1)],1)]),t._v(" "),t.isSubscriptionIncomplete?n("div",{staticClass:"ws-billing-row"},[n("div",{staticClass:"payment-failed-note"},[t._v("\n            Your payment failed.\n            "),t.lastPaymentErrorMessage?n("span",[t._v("Reason: "),n("em",[t._v(t._s(t.lastPaymentErrorMessage))])]):t._e(),t._v("\n            This workspace will be downgraded to the free plan in 24hrs.\n            Please "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.retryPayment.apply(null,arguments)}}},[t._v("click here")]),t._v(" to retry the payment or update your card details\n          ")])]):t._e()],1),t._v(" "),t.canSwitchToAnnual?n("billing-banner",{staticClass:"ws-billing__banner ws-billing__banner--annual",attrs:{label:"",title:"Switch to Annual",description:"You'll be saving $"+t.annualDiscount+" per year"},scopedSlots:t._u([{key:"actions",fn:function(){return[n("u-button",{staticClass:"ws-billing__banner-button",nativeOn:{click:function(e){return e.stopPropagation(),t.openSwitchDialog.apply(null,arguments)}}},[t._v("\n            Switch to annual\n          ")])]},proxy:!0}],null,!1,647494801)}):t._e(),t._v(" "),t.currentSubscription.isCanceled||"starter"!==t.planType?t._e():n("div",{staticClass:"ws-billing__banner ws-billing__banner--features"},[n("billing-banner",{staticClass:"ws-billing__banner ws-billing__banner--features-content",attrs:{header:"",title:"Get more with pro plan",description:"Unlock more features",features:[{title:"Team library",description:"A shared repository of reusable elements and documents for your team."},{title:"Branding",description:"Brand your maps and personas with your company colors. Branded export with your logo."},{title:"PPTX export",description:"Download maps and personas as PowerPoint presentations."}]},scopedSlots:t._u([{key:"actions",fn:function(){return[n("u-button",{staticClass:"ws-billing__banner-button",on:{click:t.goToPricing}},[t._v("\n              See Pricing\n            ")])]},proxy:!0}],null,!1,807997895)})],1),t._v(" "),t.currentSubscription.isCanceled||"proNew"!==t.planType&&"pro"!==t.planType?t._e():n("billing-banner",{staticClass:"ws-billing__banner ws-billing__banner--change-plan",attrs:{title:"Change plan",description:"Compare your plan with other plans"},scopedSlots:t._u([{key:"actions",fn:function(){return[n("u-button",{staticClass:"ws-billing__banner-button",attrs:{invert:""},on:{click:t.goToPricing}},[t._v("\n            See Pricing\n          ")])]},proxy:!0}],null,!1,2252603327)})],1)]),t._v(" "),n("section",{staticClass:"ws-billing__section pt-0"},[n("div",{staticClass:"d-flex justify-space-between"},[n("div",{staticClass:"current-subscription"},[t.isSubscriptionIncomplete||t.isEnterprise?t._e():n("div",{staticClass:"ws-billing-row autorenew"},[n("u-label",[t._v("Autorenew")]),t._v(" "),n("div",{staticClass:"autorenew__container d-flex align-center"},[n("u-toggle",{staticClass:"autorenew__toggle",attrs:{disabled:t.isFetching,"model-value":t.isAutorenew},on:{change:t.toggleAutoRenew}}),t._v(" "),t.isFetching?n("v-progress-circular",{staticClass:"autorenew__progress",attrs:{indeterminate:t.isFetching,value:0,size:"24",color:"#99a4b0"}}):t._e(),t._v(" "),t.isAutorenew?n("div",{staticClass:"autorenew__label"},[n("p",[t._v("Turn off if you don't plan to use UXPressia next "+t._s(t.planInterval))])]):t._e()],1)],1),t._v(" "),t.isEnterprise?t._e():n("div",{staticClass:"ws-billing-row"},[n("u-label",[t._v("Coupon")]),t._v(" "),n("div",[t.coupon?n("div",[t._v("\n              "+t._s(t.coupon.id)+"\n              "),t.coupon&&t.coupon.percent_off?n("span",[t._v("\n                "+t._s(t.coupon.percent_off)+"%\n              ")]):t._e(),t._v(" "),t.coupon&&t.coupon.amount_off?n("span",[t._v("\n                $"+t._s(t.coupon.amount_off/100)+"\n              ")]):t._e(),t._v(" "),n("a",{staticClass:"d-inline-flex ml-5",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openCouponDialog.apply(null,arguments)}}},[t._v("Edit coupon")])]):n("div",[t._v("\n              You don't have an active coupon\n              "),n("a",{staticClass:"d-inline-flex ml-5",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openCouponDialog.apply(null,arguments)}}},[t._v("Redeem coupon")])])])],1),t._v(" "),t.isEnterprise?n("div",{staticClass:"ws-billing-row"},[n("p",[t._v("\n            If you need to update your subscription\n            "),n("a",{attrs:{href:"mailto:"+t.contactEmail+"?subject=Updates for "+t.currentWorkspace.name+" subscription",target:"_blank"}},[t._v("contact your account manage")])])]):t._e()])])]),t._v(" "),t.currentSubscription.isCanceled||t.isEnterprise?t._e():n("section",{staticClass:"ws-billing__section"},[n("workspace-subheader",{attrs:{title:"Cancel Subscription",description:"UXPressia doesn't meet your expectations? <a href='"+t.mailUrl+"'>Please let us know first</a>. We value your feedback and are always there to find the best solution."}}),t._v(" "),n("div",{staticClass:"ws-billing-row"},[n("u-button",{staticClass:"mr-12",attrs:{cancel:"",disabled:t.isFetching},nativeOn:{click:function(e){return e.stopPropagation(),t.openUnsubscribeDialog(!1)}}},[t._v("\n        CANCEL SUBSCRIPTION\n      ")])],1),t._v(" "),n("div",{staticClass:"ws-billing-row"},[n("p",[t._v("\n        Please note, upon cancellation of your subscription as soon as\n        your billing period ends, you will no longer be able to access\n        your projects except for the last one you worked with.\n        Sharing and exporting maps/personas will not be available.\n      ")])])],1),t._v(" "),t.currentSubscription.isCanceled&&!t.isEnterprise?n("section",{staticClass:"ws-billing__section"},[n("div",{staticClass:"ws-billing-title"},[t._v("\n      Renew Subscription\n    ")]),t._v(" "),n("div",{staticClass:"ws-billing-row"},[n("p",[t._v("Get back to "+t._s(t.planName)+". You will be billed after current paid period expires.")])]),t._v(" "),n("div",{staticClass:"ws-billing-row"},[n("u-button",{attrs:{disabled:t.isFetching},nativeOn:{click:function(e){return e.stopPropagation(),t.renew({subscription:t.currentSubscription})}}},[t._v("\n        renew subscription\n      ")])],1)]):t._e()])}),[],!1,null,"e3247074",null);e.a=component.exports;l()(component,{VProgressCircular:d.a})},3534:function(t,e,n){"use strict";n.r(e);var r=n(1942).a,o=(n(3188),n(9)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentSubscription&&t.isShowing?n("div",{staticClass:"ws-billing"},[t.showPricing?n("section",{staticClass:"ws-billing__section"},[n("pricing-plans",{attrs:{workspace:t.currentWorkspace,subscription:t.currentSubscription}}),t._v(" "),t.isPricingBundlePromoVisible?n("pricing-pack",{staticClass:"pricing-pack--transparent pricing-pack--dashboard"}):t._e(),t._v(" "),n("faq-list",{staticClass:"ws-billing__faq",attrs:{title:"Frequently asked questions",questions:t.pricingFaqQuestions}}),t._v(" "),n("pricing-plans-help",{attrs:{transparent:""}})],1):n("current-subscription",{attrs:{"current-subscription":t.currentSubscription}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);