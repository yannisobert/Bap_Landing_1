(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{1939:function(e,t,r){"use strict";(function(e){r(10);var n=r(3),o=(r(16),r(11)),c=r(8),l=r.n(c),d=r(3407),m=r(3408);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={name:"WorkspaceSettingsPage",components:{WorkspaceHeader:d.a,WorkspaceNavigation:m.a},async beforeRouteUpdate(t,r,n){const{workspaceId:o}=t.params;if("workspace-workspaceId"===t.name&&o&&o!==r.params.workspaceId){this.workspaceMemberships.find((t=>e.get(t.user,"id")===this.userId&&t.roles.includes(l.a.roles.workspace.contributor)))&&await this.setPrimary({workspaceId:o})}n()},middleware:["auth"],async fetch(t){let{store:r,params:n,error:o}=t;const{workspaceId:c}=n;if(!r.getters["auth/memberships"].find((t=>c===e.get(t,"workspace._id"))))return o({statusCode:403,message:"Forbidden"});const l=[r.dispatch("workspaces/fetchWorkspace",{workspaceId:c}),r.dispatch("subscriptions/fetchSubscriptions",{workspaceId:c})];e.get(r,"state.auth.user.isAuthenticated")&&(l.push(r.dispatch("workspaces/fetchWorkspaces")),l.push(r.dispatch("memberships/fetchMemberships",{workspaceId:c})));try{await Promise.all(l)}catch(t){o({statusCode:e.get(t,"response.status"),message:e.get(t,"response.data.message")})}},head:{script:[{src:"https://js.stripe.com/v3/"}]},computed:h(h(h(h(h(h({},Object(o.e)("memberships",{workspaceMemberships:"memberships"})),Object(o.c)("subscriptions",["currentSubscription"])),Object(o.c)("memberships",["personalWorkspaceId"])),Object(o.c)("auth",["userId","memberships"])),Object(o.c)("workspaces",["workspacesList","currentWorkspace","isAdminRole"])),{},{isPersonalWorkspace(){return this.personalWorkspaceId===this.currentWorkspace.id},workspacesListWithMemberships(){const e=this.memberships.map((e=>{let{workspace:t}=e;return t._id}));return this.workspacesList.filter((t=>{let{id:r}=t;return e.includes(r)}))}}),async mounted(){this.closeAllMenus(),this.isAdminRole&&await this.fetchSummary({workspaceId:this.currentWorkspace.id})},methods:h(h(h({},Object(o.b)("ui",["closeAllMenus"])),Object(o.b)("memberships",["setPrimary"])),Object(o.b)("workspaces",["fetchSummary"]))}}).call(this,r(12))},2329:function(e,t,r){},2330:function(e,t,r){},3178:function(e,t,r){"use strict";r(2329)},3179:function(e,t,r){"use strict";r(2330)},3407:function(e,t,r){"use strict";var n=r(346),o=r(349),c={name:"WorkspaceHeader",components:{PermissionControl:n.a,PermissionControlTooltip:o.a},props:{workspaces:{type:Array,default:()=>[]},currentWorkspace:{type:Object,default:()=>({})},personal:Boolean},methods:{showAddWorkspaceDialog(){this.$openDialog({component:()=>r.e(182).then(r.bind(null,3486)),title:"Create new workspace"})},async showDeletingConfirm(){this.$openDialog({component:()=>r.e(183).then(r.bind(null,3487)),title:"Confirm action",workspace:this.currentWorkspace})}}},l=(r(3178),r(9)),d=r(20),m=r.n(d),k=r(300),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"workspace-header"},[r("div",{staticClass:"workspace-header__title"},[e._v("\n    Workspaces\n  ")]),e._v(" "),r("div",{staticClass:"workspace-header__icon"},[r("icon",{attrs:{name:"collapsed",width:"20px",height:"20px"}})],1),e._v(" "),r("div",{staticClass:"workspace-header__name"},[1===e.workspaces.length?r("div",[e._v("\n      "+e._s(e.workspaces[0].name)+"\n    ")]):r("v-menu",{attrs:{"offset-y":"",attach:!0},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("span",e._g({staticClass:"workspace-header__name-text",attrs:{"data-cy":"workspace-toggler"}},n),[e._v("\n          "+e._s(e.currentWorkspace.name)+"\n        ")])]}}])},[e._v(" "),r("ul",{staticClass:"dropdown-menu workspace-header__dropdown-menu"},e._l(e.workspaces,(function(t){return r("li",{key:t.id,staticClass:"dropdown-menu__item"},[r("nuxt-link",{staticClass:"dropdown-menu__link",attrs:{to:"/workspace/"+t.id,"exact-active-class":"is-active"}},[r("span",{staticClass:"dropdown-menu__icon dropdown-menu__icon--check"},[r("icon",{attrs:{name:"tick",width:"20",height:"20"}})],1),e._v(" "),r("span",{staticClass:"dropdown-menu__text"},[e._v(e._s(t.name))])])],1)})),0)])],1),e._v(" "),r("div",{staticClass:"workspace-header__aside"},[e.currentWorkspace.id?r("permission-control",{attrs:{model:"Workspace",action:"create",instance:e.currentWorkspace},scopedSlots:e._u([{key:"default",fn:function(t){return[t.isCan?r("u-button",{attrs:{cancel:""},nativeOn:{click:function(t){return t.stopPropagation(),e.showAddWorkspaceDialog.apply(null,arguments)}}},[e._v("\n          Create New Workspace\n        ")]):e._e()]}}],null,!1,2932246863)}):e._e(),e._v(" "),e.currentWorkspace.id&&!e.personal?r("permission-control",{attrs:{model:"Workspace",action:"delete",instance:e.currentWorkspace},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.isAdmin,o=t.isPermission,c=t.permission,l=t.isCan;return[r("permission-control-tooltip",{attrs:{"is-admin":n,"is-disabled":o,permission:c,"text-only":""}},[l?r("u-button",{staticClass:"ml-2",attrs:{flat:"",disabled:!o,icon:"cross"},nativeOn:{click:function(t){return t.stopPropagation(),e.showDeletingConfirm.apply(null,arguments)}}},[e._v("\n            Delete Workspace\n          ")]):e._e()],1)]}}],null,!1,3092870987)}):e._e()],1)])}),[],!1,null,"d94edfce",null);t.a=component.exports;m()(component,{VMenu:k.a})},3408:function(e,t,r){"use strict";r(10);var n=r(3),o=r(11),c=r(346),l=r(349);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={name:"WorkspaceNavigation",components:{PermissionControl:c.a,PermissionControlTooltip:l.a},props:{currentWorkspace:{type:Object,default:()=>({})},currentSubscription:{type:Object,default:()=>({})}},data:()=>({}),computed:m({},Object(o.c)("workspaces",["canViewBrandingAndIntegration"])),methods:m(m({},Object(o.b)("ui",["closeAllMenus","openProFeatureOverviewDialog"])),{},{handleBrandingTabClick(e,t){e?this.$router.push("/workspace/".concat(this.currentWorkspace.id,"/branding")):t&&this.openProFeatureOverviewDialog({feature:"branding"})},handleIntegrationsTabClick(e,t){e?this.$router.push("/workspace/".concat(this.currentWorkspace.id,"/integrations")):t&&this.openProFeatureOverviewDialog({feature:"integrations"})},handleTeamLibraryTabClick(e,t){e?this.$router.push("/workspace/".concat(this.currentWorkspace.id,"/team-library")):t&&this.openProFeatureOverviewDialog({feature:"teamLibrary"})},isActiveMenuItem(e){return this.$route.name&&this.$route.name.includes(e)}})},h=(r(3179),r(9)),component=Object(h.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ws-tabs"},[r("nuxt-link",{staticClass:"ws-tabs__item",attrs:{to:"/workspace/"+e.currentWorkspace.id,"exact-active-class":"is-active"}},[e._v("\n    General\n  ")]),e._v(" "),e.currentSubscription?r("permission-control",{attrs:{model:"Subscription",action:"update",instance:e.currentSubscription},scopedSlots:e._u([{key:"default",fn:function(t){return[t.isCan?r("nuxt-link",{staticClass:"ws-tabs__item",attrs:{to:"/workspace/"+e.currentWorkspace.id+"/billing","active-class":"is-active"}},[e._v("\n        Billing\n      ")]):e._e()]}}],null,!1,2229947428)}):e._e(),e._v(" "),e.currentSubscription?r("permission-control",{attrs:{model:"Subscription",action:"update",instance:e.currentSubscription},scopedSlots:e._u([{key:"default",fn:function(t){return[t.isCan?r("nuxt-link",{staticClass:"ws-tabs__item",attrs:{to:"/workspace/"+e.currentWorkspace.id+"/invoices","exact-active-class":"is-active"}},[e._v("\n        Invoices\n      ")]):e._e()]}}],null,!1,2285335426)}):e._e(),e._v(" "),e.currentWorkspace.id?r("permission-control",{attrs:{model:"Workspace",action:"updateBranding",instance:e.currentWorkspace},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.isAdmin,o=t.isPermission,c=t.permission;return[r("permission-control-tooltip",{attrs:{"is-admin":n,"is-disabled":o||n,permission:c}},[r("div",{staticClass:"ws-tabs__item--badge"},[e.canViewBrandingAndIntegration?r("span",{staticClass:"ws-tabs__item",class:{"is-active":e.isActiveMenuItem("branding")},attrs:{"data-cy":"branding-link"},on:{click:function(t){return e.handleBrandingTabClick(o,n)}}},[e._v("\n            Branding\n          ")]):e._e(),e._v(" "),o?e._e():r("u-badge",{attrs:{"plan-type":"pro"}})],1)])]}}],null,!1,60813014)}):e._e(),e._v(" "),e.currentWorkspace.id?r("permission-control",{attrs:{model:"Workspace",action:"updateIntegration",instance:e.currentWorkspace},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.isAdmin,o=t.isPermission,c=t.permission;return[r("permission-control-tooltip",{attrs:{"is-admin":n,"is-disabled":o||n,permission:c}},[r("div",{staticClass:"ws-tabs__item--badge"},[e.canViewBrandingAndIntegration?r("span",{staticClass:"ws-tabs__item",class:{"is-active":e.isActiveMenuItem("integrations")},attrs:{"data-cy":"integrations-link"},on:{click:function(t){return e.handleIntegrationsTabClick(o,n)}}},[e._v("\n            Integrations\n          ")]):e._e(),e._v(" "),o?e._e():r("u-badge",{attrs:{"plan-type":"pro"}})],1)])]}}],null,!1,1800029142)}):e._e(),e._v(" "),e.currentWorkspace.id?r("permission-control",{attrs:{model:"Workspace",action:"updateTeamLibrary",instance:e.currentWorkspace},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.isAdmin,o=t.isPermission,c=t.permission;return[r("permission-control-tooltip",{attrs:{"is-admin":n,"is-disabled":o||n,permission:c}},[r("div",{staticClass:"ws-tabs__item--badge"},[r("span",{staticClass:"ws-tabs__item",class:{"is-active":e.isActiveMenuItem("team-library")},attrs:{"data-cy":"team-library-link"},on:{click:function(t){return e.handleTeamLibraryTabClick(o,n)}}},[e._v("\n            Team library\n          ")]),e._v(" "),o?e._e():r("u-badge",{attrs:{"plan-type":"pro"}})],1)])]}}],null,!1,1245697062)}):e._e()],1)}),[],!1,null,"51a2231b",null);t.a=component.exports},3532:function(e,t,r){"use strict";r.r(t);var n=r(1939).a,o=r(9),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-content"},[r("div",{staticClass:"ws-page l-wrap"},[r("workspace-header",{attrs:{workspaces:e.workspacesListWithMemberships,"current-workspace":e.currentWorkspace,personal:e.isPersonalWorkspace}}),e._v(" "),e.currentWorkspace?r("workspace-navigation",{attrs:{"current-workspace":e.currentWorkspace,"current-subscription":e.currentSubscription}}):e._e(),e._v(" "),r("nuxt-child",{staticClass:"ws-content"})],1)])}),[],!1,null,null,null);t.default=component.exports}}]);